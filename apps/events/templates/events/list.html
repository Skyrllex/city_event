<!DOCTYPE html>
<html>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
 
        .onebar {  display: inline-block;border-top: 2px solid; border-bottom: 2px solid; cursive; font-family: 'Righteous'; padding:10px; background: #1f5c7e; heigh: 300px; width: 100%;}
        .one h1 {  font-family: 'Righteous', cursive; position: relative;color: #3CA1D9;  display: inline-block;border-top: 2px solid; border-bottom: 2px solid; font-size: 3em; padding: 11px 60px; margin: 0;  line-height: 1;}
        .one h2 {  font-family: 'Righteous', cursive; position: relative;color: #3CA1D9;  display: inline-block;border-top: 2px solid; border-bottom: 2px solid; font-size: 3em; padding: 11px 60px; margin: 0;  line-height: 1;}
        .one3 h3 {  font-family: 'Righteous', cursive; text-align: center;color: #1f5c7e; border-top: 2px solid; border-bottom: 2px solid; font-size: 1em; padding: 11px 60px; margin: 0;  line-height: 1;}
        .one { background: #FFF4ED; padding: 50px 20px; text-align: center;}
        .one3 { background: #FFF4ED;  font-family: 'Righteous', cursive; trandiron:transform 0.3s; height:99%; position: relative;color: #213e50; border: 5px solid; font-size: 1em; padding: 15px 60px; margin: 10px;  line-height: 1;}
        .one { background: #FFF4ED; padding: 50px 20px; text-align: center;}
        .one4 { background: #FFF4ED; padding: 10px 10px; text-align: center;  text-align: center; verticale-align: middle; line-height: normal; height: 200px;}
        .one h1:before, .one h1:after { content: "";  position: absolute; top: 0; width: 30px; height: 100%; border-left: 2px solid; border-right: 2px solid; background: repeating-linear-gradient(180deg, transparent, transparent 2px, #3CA1D9 2px, #3CA1D9 4px);} .one h1:before {left: 0;}
        .one h1:after {right: 0;}
        @media (max-width: 100%; min-height: 200px) {
        .one h1 {font-size: 2em;} }
        .pagination { background: #1f5c7e; margin: 20px; text-align: center;width: 100%; padding:10px}
        .pagination a { padding: 5px 10px; margin: 0 5px; border: 1px solid #ddd; text-decoration: none;}
        .pagination .current { padding: 5px 10px;font-weight: bold;}
</style>
    </style>
    <head><div class ="one"><tittle><h1>Платформа проведения мероприятий</h1></title></div></head>
    <body>
   
        <div class="one"> <h2>Cписок мероприятий: </h2></div>
            <div class="onebar"> 
                <form method="get"> 
                    <input type="text" name = "search_name" placeholder="Поиск по событию">
                    <input type="text" name = "search_loc" placeholder="Поиск по месту">
                    <label> Дата начала: <label/>
                    <input type="date" name = "start_date_from" placeholder="Начиннается с ">
                    <input type="date" name = "start_date_to" placeholder="по ">
                    <label> Дата завершения: <label/>
                    <input type="date" name = "end_date_from" placeholder="Начиннается с ">
                    <input type="date" name = "end_date_to" placeholder="по ">
                    <input type="input" name = "top_from" placeholder="Рейтинг с ">
                    <input type="inpet" name = "top_to" placeholder="Рейтинг по ">
                    <select name="ordering">
                        <option value="">Сбросить</option>
                        <option value="name">Название А-Я</option>
                        <option value="-name">Название Я-А</option>
                        <option value="-start_date">Новые</option>
                        <option value="start_date">Старые</option>
                        <option value="-end_date">Начинаются</option>
                        <option value="end_date">Заканчиваются</option>
                    </select>
                    <button type="submit">Применить</button>
                </form>
            </div>
            <div class ="row">
                {% for event in events %}
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="one3">
                            <h3><strong> {{ event.name }}</strong></h3>
                            <p class=one4><strong> 
                            {% for image in event.images.all%}
                                {% if image.b_preview%}
                                    <img src= "{{image.prev_url}}" alt="Изображение {{event.name}}" >
                                {% endif %}
                            {% endfor %}
                            </strong> </p>
                            <p> <strong> {{ event.description }} </strong></p>
                            <p> C: <strong> {{ event.start_date }} по {{ event.end_date }} </strong></p>
                            <p>Место проведения: <strong> {{ event.id_location.name }} </strong></p>
                            {% if event.status == 'draft' %}
                                 <p style = "color: gray">Статус: <strong> {{ event.get_status_display }} </strong></p>
                                {% elif event.status == 'later publication' %}
                                    <p style ="color:yellow">Статус: <strong> {{ event.get_status_display }} </strong></p>
                                    {% elif event.status == 'archive' %}
                                        <p style= "color: red">Статус: <strong> {{ event.get_status_display }} </strong></p>      
                            {% else %}
                                <p>Статус: <strong> {{ event.get_status_display }} </strong></p>
                            {% endif %}
                            <p>Рейтинг: <strong> {{ event.top }} </strong></p>
                            {% if event.author.full_name %}
                                <p>Автор: <strong> {{ event.author.full_name }},{{ event.author.username }} </strong></p>
                            {% else %}
                            <p>Автор: <strong> {{ event.author.username }} </strong></p>
                            {% endif %}
                            <p>Дата публикации:<strong> {{ event.pub_date }} </strong></p>
                        </div>
                    </div>    
                {% empty %}
                {% endfor %}
                <div class="pagination">
                    <span class="current">
                        Страница {{ page_obj.number }} из {{ page_obj.paginator.num_pages }}
                    </span>
                   {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}">Назад</a>
                    {% else %}
                        <span class="disabled"></span>
                    {% endif %}
                    {% for num in page_obj.paginator.page_range %}
                        {% if num == page_obj.number %}
                            <span class="current">{{ num }}</span>
                        {% else %}
                            <a href="?page={{ num }}">{{ num }}</a>
                        {% endif %}
                    {% endfor %}
                    {% if page_obj.has_previous %}
                        <a href="?page={{ page_obj.previous_page_number }}">Вперед</a>
                    {% else %}
                        <span class="disabled"></span>
                    {% endif %}
                </div>
            </div>
        </div>
    </body> 
</html>