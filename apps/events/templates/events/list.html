<!DOCTYPE html>
<html>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
 
        .onebar {  display: inline-block;border-top: 2px solid; border-bottom: 2px solid; cursive; font-family: 'Righteous'; padding:10px; background: #1f5c7e; heigh: 300px; width: 100%;}
        .one h1,  .one h2 {  font-family: 'Righteous', cursive; position: relative;color: #3CA1D9;  display: inline-block;border-top: 2px solid; border-bottom: 2px solid; font-size: 3em; padding: 11px 60px; margin: 0;  line-height: 1;}
        .one3 h3 {  font-family: 'Righteous', cursive; text-align: center;color: #1f5c7e; border-top: 2px solid; border-bottom: 2px solid; font-size: 1em; padding: 11px 60px; margin: 0;  line-height: 1;}
        .one3 { background: #FFF4ED;  font-family: 'Righteous', cursive; trandiron:transform 0.3s; height:99%; position: relative;color: #1f5c7e;  border: 5px solid; font-size: 1em; padding: 15px 60px; margin: 10px;  line-height: 1;}
        .one { background: #FFF4ED; padding: 50px 20px; text-align: center;}
        .one4 { background: #FFF4ED; padding: 10px 10px; text-align: center;  text-align: center; verticale-align: middle; line-height: normal; height: 200px;}
        .one h1:before, .one h1:after { content: "";  position: absolute; top: 0; width: 30px; height: 100%; border-left: 2px solid; border-right: 2px solid; background: repeating-linear-gradient(180deg, transparent, transparent 2px, #3CA1D9 2px, #3CA1D9 4px);} .one h1:before {left: 0;}
        .one h1:after {right: 0;}
        @media (max-width: 100%; min-height: 200px) {
        .one h1 {font-size: 2em;} }
        .pagination { background: #1f5c7e; margin: 20px; text-align: center;width: 100%; padding:10px}
        .pagination a { padding: 5px 10px; margin: 0 5px; border: 1px solid #ddd; text-decoration: none;}
        .pagination .current { padding: 5px 10px;font-weight: bold;}
        a { color: #000000;  text-decoration: none;}
</style>
    </style>
    <div class="onebar"> 
        <a href="/">üè†–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/events/list">üìÖ –í—Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</a>
        <a href="/admin/">‚öôÔ∏è –ê–¥–º–∏–Ω–∫–∞</a>
        <a href="/api/events/">üìñ API –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</a>
        <a href="/api/location/">üìñAPI –õ–æ–∫–∞—Ü–∏–π</a>
        <a href="/api/docs/">üìä API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</a>
        <a href="/api/schema/">üìë –ó–∞–≥—Ä—É–∑–∏—Ç—å Schema</a>

        {% if user.is_authenticated %}
        <a href="/events/hello">üñêÔ∏è Hello! </a>
        <span>üë§ {{ user.username }}</span>
        <a href="/admin/">üö™ –í—ã–π—Ç–∏</a>
        {% else %}
        <a href="/admin/">üîë –í–æ–π—Ç–∏</a>
        {% endif %}  
    </div>
    <head><div class ="one"><tittle><h1>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π</h1></title></div></head>
    <body>
        <div class="one"> <h2>C–ø–∏—Å–æ–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π: </h2></div>
            <div class="onebar"> 
                <form method="get"> 
                    <input type="text" name = "search_name" placeholder="–ü–æ–∏—Å–∫ –ø–æ —Å–æ–±—ã—Ç–∏—é">
                    <input type="text" name = "search_loc" placeholder="–ü–æ–∏—Å–∫ –ø–æ –º–µ—Å—Ç—É">
                    <label> –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞: <label/>
                    <input type="date" name = "start_date_from" placeholder="–ù–∞—á–∏–Ω–Ω–∞–µ—Ç—Å—è —Å ">
                    <input type="date" name = "start_date_to" placeholder="–ø–æ ">
                    <label> –î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: <label/>
                    <input type="date" name = "end_date_from" placeholder="–ù–∞—á–∏–Ω–Ω–∞–µ—Ç—Å—è —Å ">
                    <input type="date" name = "end_date_to" placeholder="–ø–æ ">
                    <input type="input" name = "top_from" placeholder="–†–µ–π—Ç–∏–Ω–≥ —Å ">
                    <input type="inpet" name = "top_to" placeholder="–†–µ–π—Ç–∏–Ω–≥ –ø–æ ">
                    <select name="ordering">
                        <option value="">–°–±—Ä–æ—Å–∏—Ç—å</option>
                        <option value="name">–ù–∞–∑–≤–∞–Ω–∏–µ –ê-–Ø</option>
                        <option value="-name">–ù–∞–∑–≤–∞–Ω–∏–µ –Ø-–ê</option>
                        <option value="-start_date">–ù–æ–≤—ã–µ</option>
                        <option value="start_date">–°—Ç–∞—Ä—ã–µ</option>
                        <option value="-end_date">–ù–∞—á–∏–Ω–∞—é—Ç—Å—è</option>
                        <option value="end_date">–ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è</option>
                    </select>
                    <button type="submit">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                </form>
            </div>
            <div class ="row">
                {% for event in events %}
                    <div class="col-lg-4 col-md-6 col-sm-12">
                        <div class="one3">
                            <h3><strong> {{ event.name }}</strong></h3>
                            <p class=one4><strong> 
                            {% for image in event.images.all%}
                                {% if image.b_preview%}
                                    <img src= "{{image.prev_url}}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ {{event.name}}" >
                                {% endif %}
                            {% endfor %}
                            </strong> </p>
                            <p> <strong> {{ event.description }} </strong></p>
                            <p> C: <strong> {{ event.start_date }}  </strong></p>
                            <p> –ø–æ <strong> {{ event.end_date }} </strong></p>
                            <p>–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è: <strong> {{ event.id_location.name }} </strong></p>
                            {% if event.status == 'draft' %}
                                 <p style = "color: gray">–°—Ç–∞—Ç—É—Å: <strong> {{ event.get_status_display }} </strong></p>
                                {% elif event.status == 'later publication' %}
                                    <p style ="color:yellow">–°—Ç–∞—Ç—É—Å: <strong> {{ event.get_status_display }} </strong></p>
                                    {% elif event.status == 'archive' %}
                                        <p style= "color: red">–°—Ç–∞—Ç—É—Å: <strong> {{ event.get_status_display }} </strong></p>      
                            {% else %}
                                <p>–°—Ç–∞—Ç—É—Å: <strong> {{ event.get_status_display }} </strong></p>
                            {% endif %}
                            <p>–†–µ–π—Ç–∏–Ω–≥: <strong> {{ event.top }} </strong></p>
                            {% if event.author.full_name %}
                                <p>–ê–≤—Ç–æ—Ä: <strong> {{ event.author.full_name }},{{ event.author.username }} </strong></p>
                            {% else %}
                            <p>–ê–≤—Ç–æ—Ä: <strong> {{ event.author.username }} </strong></p>
                            {% endif %}
                            <p>–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:<strong> {{ event.pub_date }} </strong></p>

                                <div class="event-card">
                                    {% if event.id_location %}
                                    <h3>{{ event.id_location.name }}</h3>
                                        {% with weather=event.id_location.get_weather_loc %}
                                            {% if weather %}
                                                <div class="weather">
                                                    <small> {% if weather %} {% if weather.temperature < 0 %} ‚ùÑÔ∏è  {% elif weather.temperature < 15 %}  üå§Ô∏è   {% elif weather.temperature < 25 %} ‚òÄÔ∏è   {% else %}üî•  {% endif %} {{ weather.temperature }} ¬∞C </small>
                                                    <small> {{ weather.wind_direction }}  {% if weather.wind_speed < 5 %}üçÉ {{ weather.wind_speed }}  {% elif weather.wind_speed < 15 %}  üí® {{ weather.wind_speed }}  {% else %} üå™Ô∏è {{ weather.wind_speed }}  {% endif %}  –º/—Å   {% endif %} </small> 
                                                    <small> {% if weather.pressure < 740 %} üìâ {% elif weather.pressure > 770 %} üìà  {% else %}üìä  {% endif %} {{ weather.pressure }} mmHg </small>
                                                    <small> {% if weather.humidity < 40 %}  üèúÔ∏è {% elif weather.humidity > 80 %} üåßÔ∏è {% else %} üíß  {% endif %} {{ weather.humidity }} %</small>
                                                </div>
                                            {% endif %}
                                        {% endwith %}
                                    {% endif %}
                                </div>

                        </div>
                    </div>    
                {% empty %}
                {% endfor %}
                <div class="pagination">
                    <span class="current">
                        –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}
                    </span>
                   {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}">–ù–∞–∑–∞–¥</a>
                    {% else %}
                        <span class="disabled"></span>
                    {% endif %}
                    {% for num in page_obj.paginator.page_range %}
                        {% if num == page_obj.number %}
                            <span class="current">{{ num }}</span>
                        {% else %}
                            <a href="?page={{ num }}">{{ num }}</a>
                        {% endif %}
                    {% endfor %}
                    {% if page_obj.has_previous %}
                        <a href="?page={{ page_obj.previous_page_number }}">–í–ø–µ—Ä–µ–¥</a>
                    {% else %}
                        <span class="disabled"></span>
                    {% endif %}
                </div>
            </div>
        </div>
    </body> 
</html>